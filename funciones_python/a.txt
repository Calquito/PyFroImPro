function [] = ReconstructionExternalFacesDirectory(Textpath,W,varargin)

 
NameOutput='Reconstruted';% Validaciones
Extension='.jpg';
expectedExtensions = {'.jpg','.pgm','.bmp','.png','.tif'};
ValidMatrix = @(x) ismatrix(x) && isnumeric(x);
p = inputParser;
addRequired(p,'Textpath');
addRequired(p,'W',ValidMatrix);
addParameter(p,'Extension',Extension,@(x) any(strcmp(lower(strrep(x,' ','')),expectedExtensions )));
addParameter(p,'NameOutput',NameOutput);
parse(p,Textpath,W,varargin{:});
Extension=p.Results.Extension;
NameOutput=p.Results.NameOutput;
%%%%%
NameFilesVector=ls(Textpath); %Vector con los nombres completos de todos los archivos en la carpeta
i=0; %%%Controla el número de archivos válidos en la carpeta, dado que en la carpeta
     %%% podrían haber archivos del sistema, los cuales hay que ignorar.
 for j=1:size(NameFilesVector,1)
   Filej=NameFilesVector(j,:); %Toma el archivo j de la carpeta
   [~,~,Fileextension]=fileparts(Filej); %Lee la extenxión del archivo
   %%% En el siguiente if valida el archivo y si la extensión coincide
   if (and(~isdir(fullfile(Textpath,Filej)),or(strcmpi(strtrim(Fileextension),Extension),isempty(Extension))))
       i=i+1; %% Archivo válido, incrementa el contador de imágenes.
       direccion=fullfile(Textpath,Filej); %% Carga la dirección completa del archivo.
       ReconstructionExternalFace(direccion,W,strcat(NameOutput,int2str(i)));
   end
 end
 num_img=i;
 if i==0 
     error(strcat('There are not images in your data base with the extension ',Extension));
 end
 end